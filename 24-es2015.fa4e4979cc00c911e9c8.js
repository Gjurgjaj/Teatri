(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{bcMI:function(n,e,t){"use strict";t.r(e),t.d(e,"MenuLekprogModule",(function(){return O}));var o=t("An66"),i=t("kZht"),r=t("kKMY"),l=t("C4W8"),s=t("zNk5"),c=t("s7kB"),g=t("phvz"),a=t("cJtj"),p=t("dlUx"),h=t("2OYx");function u(n,e){if(1&n&&(i.ac(),i.Qb(0,"svg",6),i.Lb(1,"path",7),i.Pb()),2&n){const n=i.bc().$implicit;i.Ab("viewBox","0 0 "+n.icon.icon[0]+" "+n.icon.icon[1]),i.zb(1),i.Ab("d",n.icon.icon[4])}}function d(n,e){if(1&n&&i.Lb(0,"wdg-menu-lekprog-menu",8),2&n){const n=i.bc().$implicit;i.hc("links",n.children)}}function m(n,e){if(1&n){const n=i.Rb();i.Qb(0,"li",2),i.Qb(1,"a",3),i.Xb("click",(function(t){i.sc(n);const o=e.$implicit;return i.bc().open(t,o)})),i.Qb(2,"span",2),i.Ac(3,u,2,2,"svg",4),i.Bc(4),i.Pb(),i.Pb(),i.Ac(5,d,1,1,"wdg-menu-lekprog-menu",5),i.Pb()}if(2&n){const n=e.$implicit,t=i.bc();i.Cb("dropdown",n.children),i.hc("ngStyle",t.getBgcStyles(t.background)),i.zb(1),i.zc("border-color",t.panoListColor(n)),i.hc("ngStyle",t.checkActive(n.id)?t.getBgcStyles(t.menu.list_active_item_bg):""),i.zb(1),i.zc("color",t.panoListColor(n)),i.hc("ngStyle",t.fontStyle(t.menu.panos_font)),i.zb(1),i.hc("ngIf",n.icon&&n.icon.icon&&"fad"!=n.icon.prefix),i.zb(1),i.Dc(" ",t.i18n.t(n.name)," "),i.zb(1),i.hc("ngIf",n.children)}}let b=(()=>{class n{constructor(n,e,t,o,i,r,l){this.viewerService=n,this.menuService=e,this.panoService=t,this.hotspotService=o,this.fontsService=i,this.statsService=r,this.i18n=l}get menu(){return this.menuService.menu}get background(){return this.menu.common_color?this.panoService.commonColor.background:this.menu.background}get active_color(){return this.menu.common_color?this.panoService.commonColor.active_color:this.menu.active_color}get text_color(){return this.menu.common_color?this.panoService.commonColor.text_color:this.menu.text_color}panoName(n){let e=this.panoService.getPanoById(n);return e?this.i18n.t(e.name):null}checkActive(n){return!!n&&this.menuService.activeMenuElem==n}panoListColor(n){return"pano"==n.type&&this.checkActive(n.id)?this.active_color.color:this.menu.panos_font&&this.menu.panos_font.color?this.menu.panos_font.color:this.text_color.color}goToPano(n,e=null){this.viewerService.goToPano(n,e)}open(n,e){switch(e.type){case"pano":this.goToPano(e.pano,{theta:e.theta,phi:e.phi,fov:e.fov});let n=this.statsService.getWidget(this.menu.widget);this.statsService.send({plugin:n.name,type:n.key,details:e.pano.id});break;case"link":let t=this.linkHref(e.href).match(/1s(.*?)!2/);t&&-1!=["G1","G2"].indexOf(this.panoService.keyStarts)?this.viewerService.viewer.setPano(t[1]):window.open(this.linkHref(e.href),"_blank");break;case"hotspot":let o=this.getHotspotById(e.hotspot);this.viewerService.goToPano(o.pano,o.position),this.hotspotService.open(o.id)}e.children&&this.openDropdown(n),this.menuService.activeMenuElem=e.id}fontStyle(n){return this.fontsService.fontStyle(n)}getBgcStyles(n){return n?"gradient"==n.type?"radial"!=n.align?{background:"-webkit-linear-gradient("+n.align+", "+n.color+" 0%,"+n.color2+" 100%)"}:{background:"radial-gradient(at center center, "+n.color+" 0%,"+n.color2+" 100%)"}:{background:n.color}:null}linkHref(n){return"string"==typeof n?n:this.i18n.t(n)}getHotspotById(n){return this.hotspotService.getHotspotById(n)}openDropdown(n){let e=this.getParent(n.target,"LI");if(e.classList.contains("open"))e.classList.remove("open"),this.slideUp(e.getElementsByTagName("ul")[0]);else{let n=this.getParent(e,"UL");Array.from(n.children).map(n=>{n.classList.contains("dropdown")&&n.classList.contains("open")&&(n.classList.remove("open"),this.slideUp(n.getElementsByTagName("ul")[0]))}),e.classList.add("open"),this.slideDown(e.getElementsByTagName("ul")[0])}}getParent(n,e){let t=n.parentElement;for(;t.tagName!=e;)t=t.parentElement;return t}slideDown(n,e=400){clearInterval(this.slideInterval),n.style.removeProperty("height"),n.style.position="absolute",n.style.visibility="hidden",n.style.display="block",n.style.overflow="hidden";let t=n.offsetHeight;n.style.removeProperty("position"),n.style.removeProperty("visibility"),n.style.height=0,n.style.transition="height "+e+"ms ease",setTimeout(()=>{n.style.height=t+"px",this.slideInterval=setTimeout(()=>{n.style.removeProperty("height"),n.style.removeProperty("overflow")},e)})}slideUp(n,e=400){clearInterval(this.slideInterval),n.style.removeProperty("height"),n.style.height=n.offsetHeight+"px",n.style.overflow="hidden",n.style.transition="height "+e+"ms ease",setTimeout(()=>{n.style.height=0,this.slideInterval=setTimeout(()=>{n.style.removeProperty("height"),n.style.removeProperty("overflow"),n.style.display="none"},e)})}}return n.\u0275fac=function(e){return new(e||n)(i.Kb(l.a),i.Kb(s.a),i.Kb(c.a),i.Kb(g.a),i.Kb(a.a),i.Kb(p.a),i.Kb(h.a))},n.\u0275cmp=i.Eb({type:n,selectors:[["wdg-menu-lekprog-menu"]],inputs:{links:"links"},decls:2,vars:1,consts:[[1,"links"],[3,"dropdown","ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[3,"ngStyle","click"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[3,"links",4,"ngIf"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"],[3,"links"]],template:function(n,e){1&n&&(i.Qb(0,"ul",0),i.Ac(1,m,6,12,"li",1),i.Pb()),2&n&&(i.zb(1),i.hc("ngForOf",e.links))},directives:[o.j,o.l,o.k,n],styles:['ul[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;display:none;padding:0;list-style:none;margin:1px 0 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;margin-bottom:1px;white-space:nowrap;line-height:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:7px 20px;cursor:pointer;color:inherit}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:border-bottom-color .4s ease-out;border-width:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px transparent;border-style:solid;font-family:Roboto;font-size:14px;line-height:20px;display:flex;align-items:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;margin-right:6px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.1)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border-bottom-color:inherit}ul[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding-right:40px}ul[_ngcontent-%COMP%]   li.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{position:absolute;top:12px;right:20px;display:block;box-sizing:border-box;width:15px;height:15px;content:" ";transition:transform .5s;transform:rotate(-45deg);border-style:solid;border-color:inherit;border-width:0 3px 3px 0}ul[_ngcontent-%COMP%]   li.dropdown.open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{transform:rotate(45deg)!important}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{top:0;left:100%!important;right:auto!important;margin:0 0 0 1px}']}),n})();const P=["menuList"],k=["menuDropdown"];function f(n,e){if(1&n&&(i.ac(),i.Qb(0,"svg",12),i.Lb(1,"path",13),i.Pb()),2&n){const n=i.bc().$implicit;i.Ab("viewBox","0 0 "+n.icon.icon[0]+" "+n.icon.icon[1]),i.zb(1),i.Ab("d",n.icon.icon[4])}}function _(n,e){if(1&n&&i.Lb(0,"wdg-menu-lekprog-menu",14),2&n){const n=i.bc().$implicit;i.hc("links",n.children)}}function v(n,e){if(1&n){const n=i.Rb();i.Qb(0,"li",8),i.Qb(1,"a",9),i.Xb("click",(function(t){i.sc(n);const o=e.$implicit;return i.bc().open(t,o)})),i.Qb(2,"span",10),i.Ac(3,f,2,2,"svg",11),i.Bc(4),i.Pb(),i.Pb(),i.Ac(5,_,1,1,"wdg-menu-lekprog-menu",7),i.Pb()}if(2&n){const n=e.$implicit,t=i.bc();i.Cb("dropdown",n.children),i.hc("ngStyle",t.getBgcStyles(t.background)),i.zb(1),i.zc("border-color",t.panoListColor(n)),i.hc("ngStyle",t.checkActive(n.id)?t.getBgcStyles(t.menu.list_active_item_bg):""),i.Ab("href",n.href,i.vc)("target","link"==n.type?"_blank":""),i.zb(1),i.zc("color",t.panoListColor(n)),i.hc("ngStyle",t.fontStyle(t.menu.panos_font)),i.zb(1),i.hc("ngIf",n.icon&&n.icon.icon&&"fad"!=n.icon.prefix),i.zb(1),i.Dc(" ",t.i18n.t(n.name)," "),i.zb(1),i.hc("ngIf",n.children)}}function C(n,e){if(1&n&&i.Lb(0,"wdg-menu-lekprog-menu",14),2&n){const n=i.bc();i.hc("links",n.hiddenPanos)}}let y=(()=>{class n extends r.a{constructor(){super(...arguments),this.default_options={widget:"MenuLekprogComponent",panos:[],panos_font:{family:"",size:"",italic:!1,bold:!1,underline:!1,color:"",align:"",line_height:""},recursive:!0,icons_enable:!0,hotspots_enable:!0,hide_on_start:!0,background:{type:"native",color:"rgb(255,255,255)"},active_color:{type:"native",color:"rgb(103,58,183)"},text_color:{color:"rgb(92,107,117)"},list_active_item_bg:{type:"native",color:""}},this.visiblePanos=[],this.hiddenPanos=[]}onResize(n){n.target.innerWidth!=this.resizeWidth&&(this.resizeWidth=n.target.innerWidth,this.changePanos())}ngDoCheck(){this.lengthVisiblePanos!=this.visiblePanos.length&&this.changeVisiblePanos(),this.differ.diff(this.menu.panos)&&this.changePanos()}hideNotContain(){setTimeout(()=>{this.menuList.nativeElement.getBoundingClientRect().top!=this.menuDropdown.nativeElement.getBoundingClientRect().top&&this.hiddenPanos.unshift(this.visiblePanos.splice(-1,1)[0])})}changeVisiblePanos(){this.lengthVisiblePanos=this.visiblePanos.length,this.hideNotContain()}changePanos(){this.visiblePanos=this.menu.panos.slice(),this.hiddenPanos=[],this.lengthVisiblePanos=this.visiblePanos.length,this.hideNotContain()}}return n.\u0275fac=function(e){return M(e||n)},n.\u0275cmp=i.Eb({type:n,selectors:[["wdg-menu-lekprog"]],viewQuery:function(n,e){var t;1&n&&(i.Ec(P,!0,i.l),i.Ec(k,!0,i.l)),2&n&&(i.nc(t=i.Yb())&&(e.menuList=t.first),i.nc(t=i.Yb())&&(e.menuDropdown=t.first))},hostBindings:function(n,e){1&n&&i.Xb("resize",(function(n){return e.onResize(n)}),!1,i.rc)},features:[i.wb],decls:10,vars:8,consts:[["id","menu-lekprog",1,"widget","menu",3,"ngClass"],[1,"menu-lekprog-links"],["menuList",""],["class","menu-lekprog-link",3,"dropdown","ngStyle",4,"ngFor","ngForOf"],[1,"menu-lekprog-link","dropdown",3,"ngStyle"],["menuDropdown",""],[3,"click"],[3,"links",4,"ngIf"],[1,"menu-lekprog-link",3,"ngStyle"],[3,"ngStyle","click"],[3,"ngStyle"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor"],[3,"links"]],template:function(n,e){1&n&&(i.Qb(0,"div",0),i.Qb(1,"ul",1,2),i.Ac(3,v,6,14,"li",3),i.Qb(4,"li",4,5),i.Qb(6,"a",6),i.Xb("click",(function(n){return e.open(n,{type:"text",children:e.hiddenPanos})})),i.Qb(7,"span"),i.Bc(8,"..."),i.Pb(),i.Pb(),i.Ac(9,C,1,1,"wdg-menu-lekprog-menu",7),i.Pb(),i.Pb(),i.Pb()),2&n&&(i.hc("ngClass",e.menuClass),i.zb(1),i.zc("color",e.text_color?e.text_color.color:""),i.zb(2),i.hc("ngForOf",e.visiblePanos),i.zb(1),i.zc("visibility",e.hiddenPanos.length?"visible":"hidden"),i.hc("ngStyle",e.getBgcStyles(e.background)),i.zb(5),i.hc("ngIf",e.hiddenPanos))},directives:[o.i,o.j,o.l,o.k,b],styles:['#menu-lekprog[_ngcontent-%COMP%]{position:absolute;top:20px;left:20px;z-index:2}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]{display:inline-block;float:left;position:relative;white-space:nowrap;line-height:0}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;display:block;padding:7px 20px;cursor:pointer;transition:border-bottom-color .4s ease-out;color:inherit;border-width:0}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:border-bottom-color .4s ease-out;border-width:0;border-bottom:1px transparent;border-style:solid;font-family:Roboto;font-size:14px;line-height:20px;display:flex;align-items:center}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;margin-right:6px}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.1)}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border-bottom-color:inherit}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding-right:40px}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link.dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{position:absolute;top:12px;right:20px;display:block;box-sizing:border-box;width:15px;height:15px;content:" ";transition:transform .5s;transform:rotate(-45deg);border-style:solid;border-color:inherit;border-width:0 3px 3px 0}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link.dropdown.open[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{transform:rotate(45deg)!important}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]:nth-last-child(-n+3)     ul{left:auto;right:0}#menu-lekprog[_ngcontent-%COMP%]   ul.menu-lekprog-links[_ngcontent-%COMP%]   li.menu-lekprog-link[_ngcontent-%COMP%]:nth-last-child(-n+3)     ul ul{top:0;left:auto!important;right:100%!important;margin:0 1px 0 0}']}),n})();const M=i.Sb(y);let O=(()=>{class n{constructor(n){this.componentFactoryResolver=n}resolveComponent(){return this.componentFactoryResolver.resolveComponentFactory(y)}}return n.\u0275mod=i.Ib({type:n}),n.\u0275inj=i.Hb({factory:function(e){return new(e||n)(i.Ub(i.j))},imports:[[o.c]]}),n})()}}]);