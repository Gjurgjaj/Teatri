!function(){function t(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function o(t,o){for(var e=0;e<o.length;e++){var n=o[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"70co":function(o,n,i){"use strict";i.d(n,"a",(function(){return l}));var r=i("kZht"),a=i("C4W8"),s=i("hCLc"),c=i("OGT8"),l=function(){var o=function(){function o(e){t(this,o),this.viewerService=e,this.backgroundStyle={background:null,text:null},this.backgroundCommonStyle={background:null,text:null}}return e(o,[{key:"removeHotspot",value:function(){this.viewerService.removeHotspot(this.hotspot.id)}},{key:"getBackgroundStyle",value:function(t){return t?"gradient"!=t.type?t.color:"radial"!=t.align?"-webkit-linear-gradient(".concat(t.align,", ").concat(t.color," 0%, ").concat(t.color2," 100%)"):"radial-gradient(at center center, ".concat(t.color," 0%, ").concat(t.color2," 100%)"):null}},{key:"ngOnChanges",value:function(t){void 0!==t.backgroundColor&&(this.backgroundStyle.background=this.getBackgroundStyle(this.backgroundColor)),void 0!==t.textColor&&(this.backgroundStyle.text=this.getBackgroundStyle(this.textColor)),void 0!==t.backgroundCommonColor&&(this.backgroundCommonStyle.background=this.getBackgroundStyle(this.backgroundCommonColor)),void 0!==t.textCommonColor&&(this.backgroundCommonStyle.text=this.getBackgroundStyle(this.textCommonColor))}},{key:"styleBgc",get:function(){return this.hotspot.common_color?this.backgroundCommonStyle:this.backgroundStyle}},{key:"triangleColor",get:function(){return this.hotspot.common_color?this.backgroundCommonColor.color:this.backgroundColor?this.backgroundColor.color:""}}]),o}();return o.\u0275fac=function(t){return new(t||o)(r.Kb(a.a))},o.\u0275cmp=r.Eb({type:o,selectors:[["sh-hook-hotspot-control-buttons"]],inputs:{hotspot:"hotspot",backgroundColor:["background-color","backgroundColor"],textColor:["text-color","textColor"],backgroundCommonColor:["background-common-color","backgroundCommonColor"],textCommonColor:["text-common-color","textCommonColor"]},features:[r.xb],decls:12,vars:12,consts:[[1,"control-buttons-wrapper"],[1,"control-buttons"],[1,"helper"],["mat-icon-button","","matTooltip","Move","matTooltipPosition","above",1,"move"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512"],["fill","currentColor","d","M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"],["mat-icon-button","","matTooltip","Remove","matTooltipPosition","above",1,"remove",3,"click"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512"],["fill","currentColor","d","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"],[1,"bottom-triangle"]],template:function(t,o){1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.cc(2,"safe"),r.cc(3,"safe"),r.Lb(4,"div",2),r.Qb(5,"button",3),r.ac(),r.Qb(6,"svg",4),r.Lb(7,"path",5),r.Pb(),r.Pb(),r.Zb(),r.Qb(8,"button",6),r.Xb("click",(function(){return o.removeHotspot()})),r.ac(),r.Qb(9,"svg",7),r.Lb(10,"path",8),r.Pb(),r.Pb(),r.Zb(),r.Lb(11,"span",9),r.Pb(),r.Pb()),2&t&&(r.zb(1),r.zc("background",r.ec(2,6,o.styleBgc.background,"style"))("color",r.ec(3,9,o.styleBgc.text,"style")),r.zb(10),r.zc("border-color",o.triangleColor))},directives:[s.b],pipes:[c.a],styles:[".control-buttons-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{position:absolute;top:100%;left:50%;display:-ms-flex;display:flex;visibility:hidden;flex-direction:row;transform:translateX(-50%);opacity:0;margin-top:6px;border-radius:20px;transition:opacity .3s ease}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:15px;max-height:15px}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-ripple-element{background-color:hsla(0,0%,89.4%,.5)}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]:hover{visibility:visible;opacity:1}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   span.bottom-triangle[_ngcontent-%COMP%]{position:absolute;top:-6px;left:50%;width:0;height:0;transform:translateX(-50%);border-width:0 6px 6px;border-style:solid;border-right-color:transparent!important;border-top-color:transparent!important;border-left-color:transparent!important}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .helper[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:20px;margin-top:-20px}  .hotspot:hover sh-hook-hotspot-control-buttons .control-buttons{visibility:visible!important;opacity:1!important;-webkit-animation:slide-bottom .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running;animation:slide-bottom .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running}@-webkit-keyframes slide-bottom{0%{transform:translateX(-50%) translateY(-20px)}to{transform:translateX(-50%) translateY(4px)}}"]}),o}()},"7Ph9":function(o,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("3kIJ"),r=n("An66"),a=n("kZht"),s=function(){var o=function o(){t(this,o)};return o.\u0275mod=a.Ib({type:o}),o.\u0275inj=a.Hb({factory:function(t){return new(t||o)},imports:[[r.c,i.b]]}),o}()},Gn6q:function(o,n,i){"use strict";i.d(n,"a",(function(){return u}));var r=i("kZht"),a=i("cJtj"),s=i("2OYx"),c=i("An66"),l=i("OGT8"),u=function(){var o=function(){function o(e,n){t(this,o),this.fontsService=e,this.i18n=n,this.backgroundStyle={background:null,text:null},this.backgroundCommonStyle={background:null,text:null}}return e(o,[{key:"fontStyle",value:function(t){return this.fontsService.fontStyle(t)}},{key:"getBackgroundStyle",value:function(t){return t?"gradient"!=t.type?t.color:"radial"!=t.align?"-webkit-linear-gradient(".concat(t.align,", ").concat(t.color," 0%, ").concat(t.color2," 100%)"):"radial-gradient(at center center, ".concat(t.color," 0%, ").concat(t.color2," 100%)"):null}},{key:"ngOnChanges",value:function(t){void 0!==t.backgroundColor&&(this.backgroundStyle.background=this.getBackgroundStyle(this.backgroundColor)),void 0!==t.textColor&&(this.backgroundStyle.text=this.getBackgroundStyle(this.textColor)),void 0!==t.backgroundCommonColor&&(this.backgroundCommonStyle.background=this.getBackgroundStyle(this.backgroundCommonColor)),void 0!==t.textCommonColor&&(this.backgroundCommonStyle.text=this.getBackgroundStyle(this.textCommonColor))}},{key:"styleBgc",get:function(){return this.hotspot.common_color?this.backgroundCommonStyle:this.backgroundStyle}}]),o}();return o.\u0275fac=function(t){return new(t||o)(r.Kb(a.a),r.Kb(s.a))},o.\u0275cmp=r.Eb({type:o,selectors:[["sh-hook-hotspot-title"]],inputs:{hotspot:"hotspot",backgroundColor:["background-color","backgroundColor"],textColor:["text-color","textColor"],backgroundCommonColor:["background-common-color","backgroundCommonColor"],textCommonColor:["text-common-color","textCommonColor"]},features:[r.xb],decls:7,vars:14,consts:[[1,"hotspot-title-wrapper"],[1,"hotspot-title",3,"ngStyle"],[1,"bottom-triangle"]],template:function(t,o){1&t&&(r.Qb(0,"div",0),r.cc(1,"safe"),r.Qb(2,"div",1),r.cc(3,"safe"),r.Qb(4,"h5"),r.Bc(5),r.Pb(),r.Lb(6,"span",2),r.Pb(),r.Pb()),2&t&&(r.zc("color",r.ec(1,8,o.styleBgc.text,"style")),r.zb(2),r.zc("background",r.ec(3,11,o.styleBgc.background,"style")),r.hc("ngStyle",o.fontStyle(o.hotspot.hotspot_title_font)),r.zb(3),r.Cc(o.i18n.t(o.hotspot.hotspot_title)),r.zb(1),r.zc("border-color",o.hotspot.common_color?o.backgroundCommonColor.color:o.backgroundColor.color))},directives:[c.l],pipes:[l.a],styles:[".hotspot-title-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;display:-ms-flex;display:flex;visibility:hidden;max-width:500px;margin-bottom:6px;padding:7px 20px;transform:translateX(-50%);opacity:0;border-radius:20px;background-color:#ccc;transition:opacity .3s ease}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding:0;white-space:pre;font-size:16px}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]   span.bottom-triangle[_ngcontent-%COMP%]{position:absolute;bottom:-6px;left:50%;width:0;height:0;transform:translateX(-50%);border-width:6px 6px 0;border-style:solid;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:transparent!important}  .hotspot.show-title sh-hook-hotspot-title .hotspot-title,   .hotspot:hover sh-hook-hotspot-title .hotspot-title{display:flex!important;visibility:visible!important;opacity:1!important;-webkit-animation:slide-top .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running;animation:slide-top .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running}@media only screen and (max-width:599px){.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]{display:none}}  #overlay.mobile .hotspot .hotspot-title-wrapper .hotspot-title{display:none}@-webkit-keyframes slide-top{0%{transform:translateX(-50%) translateY(20px)}to{transform:translateX(-50%) translateY(-4px)}}"]}),o}()},Gwy6:function(o,n,i){"use strict";i.d(n,"a",(function(){return h}));var r=i("kZht"),a=i("An66"),s=i("3kIJ"),c=["audioElm"];function l(t,o){if(1&t){var e=r.Rb();r.ac(),r.Qb(0,"svg",12),r.Xb("click",(function(){return r.sc(e),r.bc().play()})),r.Lb(1,"path",13),r.Pb()}}function u(t,o){if(1&t){var e=r.Rb();r.ac(),r.Qb(0,"svg",14),r.Xb("click",(function(){return r.sc(e),r.bc().pause()})),r.Lb(1,"rect",15),r.Lb(2,"rect",16),r.Pb()}}var h=function(){var o=function(){function o(){t(this,o),this.currentTime=0,this.duration=0}return e(o,[{key:"load",value:function(){var t=this;this.audioElm&&(this.audio=this.audioElm.nativeElement,this.audio.addEventListener("loadeddata",(function(){t.duration=t.audio.duration,t.currentTime=t.audio.currentTime,t.autoplay&&t.play()})))}},{key:"play",value:function(){this.audio&&this.audio.play()}},{key:"pause",value:function(){this.audio&&this.audio.pause()}},{key:"formatTime",value:function(t){var o,e=0,n=0;return(t=parseInt(t,10)||0)>3600&&(t-=60*(e=parseInt(t/3600+"",10))*60),t>60&&(t-=60*(n=parseInt(t/60+"",10))),o=t,t=e>0?e+":":"",(t+=n>0?(n<10&&e>0?"0":"")+n+":":"0:")+(o<10?"0":"")+o}},{key:"setCurrentTime",value:function(t){this.currentTime=t.target.currentTime}},{key:"changeCurrentTime",value:function(t){this.audio.currentTime=t}},{key:"ngOnChanges",value:function(t){void 0!==t.src&&this.src&&this.load()}},{key:"ngAfterViewInit",value:function(){this.src&&this.load()}},{key:"ngOnDestroy",value:function(){this.pause(),this.audio.remove()}},{key:"notitle",get:function(){return this.src.split("/").pop().replace(".mp3","")}}]),o}();return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=r.Eb({type:o,selectors:[["sh-audiobox"]],viewQuery:function(t,o){var e;1&t&&r.Ec(c,!0,r.l),2&t&&r.nc(e=r.Yb())&&(o.audioElm=e.first)},inputs:{src:"src",title:"title",light:"light",autoplay:"autoplay"},features:[r.xb],decls:17,vars:10,consts:[[1,"player"],[1,"title-wrap"],[1,"button-wrap"],["class","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 150 150",3,"click",4,"ngIf"],["class","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",3,"click",4,"ngIf"],[1,"title"],[1,"seek-wrap"],["value","0","type","range","min","0","step",".1",1,"seek-bar",3,"ngModel","max","ngModelChange"],[1,"timing"],[3,"timeupdate"],["audioElm",""],["type","audio/mpeg",3,"src"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 150 150",1,"button",3,"click"],["d","M43.3,11.1C36.6,7.1 30.3,9.6 30.3,18.6C30.3,27.6 30.3,121.3 30.3,131.7C30.3,142.1 35.6,144 43.6,139.7C51.6,134.7 133.5,87.5 141.5,83C149.3,78.5 149,72.5 141.5,68.2C134,63.8 52.2,16.4 43.3,11.1Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",1,"button",3,"click"],["width","18%","height","90%","x","22.5%","y","5%","rx","5%","ry","5%"],["width","18%","height","90%","x","62.5%","y","5%","rx","5%","ry","5%"]],template:function(t,o){1&t&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Ac(3,l,2,0,"svg",3),r.Ac(4,u,3,0,"svg",4),r.Pb(),r.Qb(5,"div",5),r.Bc(6),r.Pb(),r.Pb(),r.Qb(7,"div",6),r.Qb(8,"input",7),r.Xb("ngModelChange",(function(t){return o.currentTime=t}))("ngModelChange",(function(t){return o.changeCurrentTime(t)})),r.Pb(),r.Pb(),r.Qb(9,"div",8),r.Qb(10,"span"),r.Bc(11),r.Pb(),r.Qb(12,"span"),r.Bc(13),r.Pb(),r.Pb(),r.Qb(14,"audio",9,10),r.Xb("timeupdate",(function(t){return o.setCurrentTime(t)})),r.Lb(16,"source",11),r.Pb(),r.Pb()),2&t&&(r.Cb("light",o.light),r.zb(3),r.hc("ngIf",o.audio&&o.audio.paused),r.zb(1),r.hc("ngIf",o.audio&&!o.audio.paused),r.zb(2),r.Cc(o.title||o.notitle),r.zb(2),r.hc("ngModel",o.currentTime)("max",o.duration),r.zb(3),r.Cc(o.formatTime(o.currentTime)),r.zb(2),r.Cc(o.formatTime(o.duration)),r.zb(3),r.hc("src",o.src,r.vc))},directives:[a.k,s.e,s.a,s.c,s.d],styles:['[_nghost-%COMP%]{width:100%}.player[_ngcontent-%COMP%]{color:#434546}.title-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.title-wrap[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.button-wrap[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;justify-content:center;position:relative;align-items:center;cursor:pointer}.button-wrap[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer;fill:currentColor;z-index:1}.button-wrap[_ngcontent-%COMP%]:before{content:"";opacity:0;width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(70,170,255,.1);border-radius:50%;z-index:0}.button-wrap[_ngcontent-%COMP%]:hover{color:#46aaff}.button-wrap[_ngcontent-%COMP%]:hover:before{opacity:1}.seek-wrap[_ngcontent-%COMP%]{margin:4px 0;line-height:0}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;width:100%;height:100%;overflow:visible;outline:0 none;background-color:transparent;line-height:1em;vertical-align:top;font-size:1em;-webkit-appearance:none;cursor:pointer}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]:focus{outline:0 none}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{box-sizing:border-box;width:98%;height:.125em;background-color:#434546;cursor:pointer;-webkit-transition:all .2s ease;transition:all .2s ease}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{box-sizing:border-box;width:.5em;height:.5em;margin-top:-.175em;border-radius:.5em;background-color:#434546;-webkit-appearance:none}.seek-wrap[_ngcontent-%COMP%]:hover   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{margin-top:-.3em;margin-left:-.05em;width:.75em;height:.75em;background-color:#46aaff}.timing[_ngcontent-%COMP%]{color:#888;display:flex;justify-content:space-between;font-size:13px}.player.light[_ngcontent-%COMP%]{color:#fefefe}.player.light[_ngcontent-%COMP%]   .seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track, .player.light[_ngcontent-%COMP%]   .seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{background-color:#fefefe}']}),o}()},H8Le:function(o,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("An66"),r=n("hCLc"),a=n("kZht"),s=function(){var o=function o(){t(this,o)};return o.\u0275mod=a.Ib({type:o}),o.\u0275inj=a.Hb({factory:function(t){return new(t||o)},imports:[[i.c,r.c],i.c]}),o}()},OGT8:function(o,n,i){"use strict";i.d(n,"a",(function(){return s}));var r=i("kZht"),a=i("ENSU"),s=function(){var o=function(){function o(e){t(this,o),this.sanitizer=e}return e(o,[{key:"transform",value:function(t,o){switch(o){case"html":return this.sanitizer.bypassSecurityTrustHtml(t);case"style":return this.sanitizer.bypassSecurityTrustStyle(t);case"script":return this.sanitizer.bypassSecurityTrustScript(t);case"url":return this.sanitizer.bypassSecurityTrustUrl(t);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(t);default:throw new Error("Invalid safe type specified: "+o)}}}]),o}();return o.\u0275fac=function(t){return new(t||o)(r.Kb(a.b))},o.\u0275pipe=r.Jb({name:"safe",type:o,pure:!0}),o}()},PiNY:function(o,n,i){"use strict";i.d(n,"a",(function(){return b}));var r=i("kZht"),a=i("phvz"),s=i("2OYx"),c=i("s7kB"),l=i("C4W8"),u=i("zNk5"),h=i("cJtj"),p=i("dlUx"),d=i("ENSU"),b=function(){var o=function(){function o(e,n,i,r,a,s,c,l){t(this,o),this.hotspotService=e,this.i18n=n,this.panoService=i,this.viewerService=r,this.menuService=a,this.fontsService=s,this.statsService=c,this.sanitizer=l,this.init=!0,this.default_options={}}return e(o,[{key:"open",value:function(){null==this.hotspot.direct_link&&null==this.hotspot.pano_link||this.editorMode?(this.hotspot.center_viewer&&this.viewerService.goToPano(this.hotspotMain.pano,this.hotspotMain.position,!0),this.hotspotService.open(this.hotspotMain.id)):null!=this.hotspot.pano_link?this.hotspot.pano_link.pano&&this.viewerService.goToPano(this.hotspot.pano_link.pano,{theta:this.hotspot.pano_link.theta,phi:this.hotspot.pano_link.phi},!0):null!=this.hotspot.direct_link&&this.hotspot.direct_link&&window.open(this.hotspot.direct_link,this.hotspot.direct_link_target?"_self":"_blank");var t=this.statsService.getWidget(this.hotspot.widget);this.statsService.send({plugin:t.name,type:t.key,details:this.hotspot.pano.id})}},{key:"close",value:function(){this.hotspot.content_show&&(this.close_content_show=!0),this.hotspotService.close()}},{key:"openHotspotMenu",value:function(){this.hotspotService.menu_show=!0}},{key:"closeHotspotMenu",value:function(){this.hotspotService.menu_show=!1}},{key:"isStyle",value:function(t){return this.hotspot.active_style==t}},{key:"viewPano",value:function(t){this.viewerService.active!=t.pano&&this.viewerService.goToPano(t.pano,t)}},{key:"showHotspotTitle",value:function(){this.show_hotspot_title=!0}},{key:"hideHotspotTitle",value:function(){this.show_hotspot_title=!1}},{key:"fontStyle",value:function(t){return this.fontsService.fontStyle(t)}},{key:"safeUrl",value:function(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}},{key:"initData",value:function(){var t=this;this.data?(this.id=this.data.id,this.data.parent_id?this.parent_id=this.data.parent_id:this.checkDefaultDataUpdate()):(this.checkDefaultDataText(),this.initIdforDefault(),this.hotspotService.addHotspot(this.default_options),this.data=this.default_options,this.id=this.default_options.id),null!=this.hotspot.html&&Object.keys(this.hotspot.html).map((function(o){t.hotspot.html[o]=t.parseHtml(t.hotspot.html[o])})),"string"==typeof this.hotspot.image&&(this.hotspot.image=[{img:this.hotspot.image}]),"HotspotHolmlackComponent"==this.hotspot.widget||this.hotspot.styles.filter((function(t){return"iframe"==t.name})).pop()||this.hotspot.styles.push({name:"iframe",opt:["iframe"],ropt:["image","title","title_font","text","text_font","link","link_font","menu","menu_font","html","pano_link","media_size","audio","audio_title","audio_light","audio_autoplay","video_id"]}),this.hotspot.iframe&&(this.hotspot.iframe_safeurl=this.safeUrl(this.hotspot.iframe)),this.editorMode=this.viewerService.editor}},{key:"initIdforDefault",value:function(){this.default_options.id=this.viewerService.createHotspotId(),this.default_options.pano=Object.assign({},this.viewerService.active)}},{key:"checkDefaultDataText",value:function(){var t=this;null!=this.default_options.hotspot_title&&(this.default_options.hotspot_title=this.i18n.toLangFormat(this.default_options.hotspot_title)),null!=this.default_options.title&&(this.default_options.title=this.i18n.toLangFormat(this.default_options.title)),null!=this.default_options.text&&(this.default_options.text=this.i18n.toLangFormat(this.default_options.text)),null!=this.default_options.html&&(this.default_options.html=this.i18n.toLangFormat(this.default_options.html)),null!=this.default_options.price&&(this.default_options.price=this.i18n.toLangFormat(this.default_options.price)),null!=this.default_options.price_text&&(this.default_options.price_text=this.i18n.toLangFormat(this.default_options.price_text)),null!=this.default_options.link&&(this.default_options.link.text=this.i18n.toLangFormat(this.default_options.link.text)),this.default_options.tabs&&(this.default_options.tabs=this.default_options.tabs.map((function(o){return o.tab&&(o.tab=t.i18n.toLangFormat(o.tab)),o.title&&(o.title=t.i18n.toLangFormat(o.title)),o.hotspot_title&&(o.hotspot_title=t.i18n.toLangFormat(o.hotspot_title)),o.sub_title&&(o.sub_title=t.i18n.toLangFormat(o.sub_title)),o.text&&(o.text=t.i18n.toLangFormat(o.text)),o})))}},{key:"initInOverlay",value:function(){var t=this;this.viewerService.addHotspot(this.data.id,this.hotspot.pano),setTimeout((function(){t.hotspotService.tempActiveId==t.data.id&&(t.hotspotService.open(t.data.id),t.hotspotService.tempActiveId=null)}))}},{key:"parseHtml",value:function(t){var o=document.implementation.createHTMLDocument();return o.body.innerHTML=t.replace(/&lt;/g,"<").replace(/&gt;/g,">"),o.body.innerHTML}},{key:"checkDefaultDataUpdate",value:function(){var t=this;if(Object.keys(this.default_options).map((function(o){-1==["title","text","video_id","image","content_icon","link","menu","price","html","pano_link","media_size"].indexOf(o)&&null==t.data[o]&&(t.getNewIdentificatorHotspot()[o]=!0,t.data[o]=t.default_options[o])})),this.data.active_style&&this.data.styles&&(this.data.styles=this.default_options.styles,this.data.styles)){var o=this.data.styles.filter((function(o){return o.name==t.data.active_style})).pop();this.addOpt(o.opt),this.removeOpt(o.ropt)}this.checkFontStyle()}},{key:"getNewIdentificatorHotspot",value:function(){var t=this,o=this.panoService.newIdentification.hotspots.filter((function(o){return o.id==t.id})).pop();return o||(o={id:this.id},this.panoService.newIdentification.hotspots.push(o)),o}},{key:"addOpt",value:function(t){var o=this;t.map((function(t){if(null==o.data[t])switch(o.getNewIdentificatorHotspot()[t]=!0,t){case"price":case"title":case"text":case"html":o.data[t]=o.i18n.toLangFormat("");break;case"link":o.data[t]={url:"",text:o.i18n.toLangFormat("")};break;case"image":o.data[t]="";break;case"menu":o.data[t]=[];break;case"pano_link":o.data[t]={};break;case"media_size":o.data[t]=40;break;case"width":o.data[t]=o.hotspot.default_width;break;default:o.data[t]=""}}))}},{key:"removeOpt",value:function(t){var o=this;t.map((function(t){switch(t){case"video_id":delete o.data.video_url;default:delete o.data[t]}}))}},{key:"checkPanosFromMenu",value:function(t){var o=this;return t.map((function(e,n){"hotspot"!=e.type||e.hotspot!=o.id||o.hotspotService.getHotspotById(o.id)?e.children&&(t[n].children=o.checkPanosFromMenu(e.children),t[n].children.length||delete t[n].children):t.splice(n,1)})),t}},{key:"checkFontStyle",value:function(){var t=this;Object.keys(this.hotspot).map((function(o){o.endsWith("_font")&&t.hotspot[o]&&t.hotspot[o].family&&t.fontsService.loadFonts([t.hotspot[o].family])}))}},{key:"sanitizeUrl",value:function(){this.panoService.sanitizeUrl(this.hotspot)}},{key:"ngOnInit",value:function(){this.init&&(this.initData(),this.sanitizeUrl())}},{key:"ngAfterViewInit",value:function(){this.init&&this.initInOverlay()}},{key:"ngOnDestroy",value:function(){this.init&&this.menuService.menu.panos&&(this.menuService.menu.panos=this.checkPanosFromMenu(this.menuService.menu.panos))}},{key:"hotspot",get:function(){return this.hotspotService.getHotspotById(this.parent_id?this.parent_id:this.id)}},{key:"hotspotMain",get:function(){return this.hotspotService.getHotspotById(this.id)}},{key:"activeId",get:function(){return this.hotspotService.activeId}},{key:"isActive",get:function(){return this.activeId==this.id}},{key:"menu_show",get:function(){return this.hotspotService.menu_show}},{key:"show",get:function(){return this.hotspot.content_show?this.hotspotService.activeId==this.data.id||!this.hotspotService.activeId&&this.panoramaActive:this.hotspotService.activeId==this.id||this.hotspotService.closingId==this.id}},{key:"animation_style",get:function(){return this.hotspotService.animation_style}},{key:"panoramaActive",get:function(){return this.hotspot.pano.id==this.viewerService.active.id&&this.hotspot.pano.t_id==this.viewerService.active.t_id?!this.close_content_show:(this.close_content_show=!1,!1)}},{key:"viewerHeght",get:function(){return this.viewerService.viewerHeight}}]),o}();return o.\u0275fac=function(t){return new(t||o)(r.Kb(a.a),r.Kb(s.a),r.Kb(c.a),r.Kb(l.a),r.Kb(u.a),r.Kb(h.a),r.Kb(p.a),r.Kb(d.b))},o.\u0275cmp=r.Eb({type:o,selectors:[["hotspot-component"]],inputs:{data:"data",init:"init"},decls:0,vars:0,template:function(t,o){},encapsulation:2}),o}()}}])}();