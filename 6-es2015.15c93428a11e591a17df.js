(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"70co":function(t,o,e){"use strict";e.d(o,"a",(function(){return a}));var i=e("kZht"),n=e("C4W8"),s=e("hCLc"),r=e("OGT8");let a=(()=>{class t{constructor(t){this.viewerService=t,this.backgroundStyle={background:null,text:null},this.backgroundCommonStyle={background:null,text:null}}get styleBgc(){return this.hotspot.common_color?this.backgroundCommonStyle:this.backgroundStyle}get triangleColor(){return this.hotspot.common_color?this.backgroundCommonColor.color:this.backgroundColor?this.backgroundColor.color:""}removeHotspot(){this.viewerService.removeHotspot(this.hotspot.id)}getBackgroundStyle(t){return t?"gradient"!=t.type?t.color:"radial"!=t.align?`-webkit-linear-gradient(${t.align}, ${t.color} 0%, ${t.color2} 100%)`:`radial-gradient(at center center, ${t.color} 0%, ${t.color2} 100%)`:null}ngOnChanges(t){void 0!==t.backgroundColor&&(this.backgroundStyle.background=this.getBackgroundStyle(this.backgroundColor)),void 0!==t.textColor&&(this.backgroundStyle.text=this.getBackgroundStyle(this.textColor)),void 0!==t.backgroundCommonColor&&(this.backgroundCommonStyle.background=this.getBackgroundStyle(this.backgroundCommonColor)),void 0!==t.textCommonColor&&(this.backgroundCommonStyle.text=this.getBackgroundStyle(this.textCommonColor))}}return t.\u0275fac=function(o){return new(o||t)(i.Kb(n.a))},t.\u0275cmp=i.Eb({type:t,selectors:[["sh-hook-hotspot-control-buttons"]],inputs:{hotspot:"hotspot",backgroundColor:["background-color","backgroundColor"],textColor:["text-color","textColor"],backgroundCommonColor:["background-common-color","backgroundCommonColor"],textCommonColor:["text-common-color","textCommonColor"]},features:[i.xb],decls:12,vars:12,consts:[[1,"control-buttons-wrapper"],[1,"control-buttons"],[1,"helper"],["mat-icon-button","","matTooltip","Move","matTooltipPosition","above",1,"move"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512"],["fill","currentColor","d","M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z"],["mat-icon-button","","matTooltip","Remove","matTooltipPosition","above",1,"remove",3,"click"],["aria-hidden","true","focusable","false","role","img","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512"],["fill","currentColor","d","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"],[1,"bottom-triangle"]],template:function(t,o){1&t&&(i.Qb(0,"div",0),i.Qb(1,"div",1),i.cc(2,"safe"),i.cc(3,"safe"),i.Lb(4,"div",2),i.Qb(5,"button",3),i.ac(),i.Qb(6,"svg",4),i.Lb(7,"path",5),i.Pb(),i.Pb(),i.Zb(),i.Qb(8,"button",6),i.Xb("click",(function(){return o.removeHotspot()})),i.ac(),i.Qb(9,"svg",7),i.Lb(10,"path",8),i.Pb(),i.Pb(),i.Zb(),i.Lb(11,"span",9),i.Pb(),i.Pb()),2&t&&(i.zb(1),i.zc("background",i.ec(2,6,o.styleBgc.background,"style"))("color",i.ec(3,9,o.styleBgc.text,"style")),i.zb(10),i.zc("border-color",o.triangleColor))},directives:[s.b],pipes:[r.a],styles:[".control-buttons-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]{position:absolute;top:100%;left:50%;display:-ms-flex;display:flex;visibility:hidden;flex-direction:row;transform:translateX(-50%);opacity:0;margin-top:6px;border-radius:20px;transition:opacity .3s ease}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:15px;max-height:15px}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     .mat-ripple-element{background-color:hsla(0,0%,89.4%,.5)}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]:hover{visibility:visible;opacity:1}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   span.bottom-triangle[_ngcontent-%COMP%]{position:absolute;top:-6px;left:50%;width:0;height:0;transform:translateX(-50%);border-width:0 6px 6px;border-style:solid;border-right-color:transparent!important;border-top-color:transparent!important;border-left-color:transparent!important}.control-buttons-wrapper[_ngcontent-%COMP%]   .control-buttons[_ngcontent-%COMP%]   .helper[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:20px;margin-top:-20px}  .hotspot:hover sh-hook-hotspot-control-buttons .control-buttons{visibility:visible!important;opacity:1!important;-webkit-animation:slide-bottom .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running;animation:slide-bottom .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running}@-webkit-keyframes slide-bottom{0%{transform:translateX(-50%) translateY(-20px)}to{transform:translateX(-50%) translateY(4px)}}"]}),t})()},"7Ph9":function(t,o,e){"use strict";e.d(o,"a",(function(){return r}));var i=e("3kIJ"),n=e("An66"),s=e("kZht");let r=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(o){return new(o||t)},imports:[[n.c,i.b]]}),t})()},Gn6q:function(t,o,e){"use strict";e.d(o,"a",(function(){return l}));var i=e("kZht"),n=e("cJtj"),s=e("2OYx"),r=e("An66"),a=e("OGT8");let l=(()=>{class t{constructor(t,o){this.fontsService=t,this.i18n=o,this.backgroundStyle={background:null,text:null},this.backgroundCommonStyle={background:null,text:null}}get styleBgc(){return this.hotspot.common_color?this.backgroundCommonStyle:this.backgroundStyle}fontStyle(t){return this.fontsService.fontStyle(t)}getBackgroundStyle(t){return t?"gradient"!=t.type?t.color:"radial"!=t.align?`-webkit-linear-gradient(${t.align}, ${t.color} 0%, ${t.color2} 100%)`:`radial-gradient(at center center, ${t.color} 0%, ${t.color2} 100%)`:null}ngOnChanges(t){void 0!==t.backgroundColor&&(this.backgroundStyle.background=this.getBackgroundStyle(this.backgroundColor)),void 0!==t.textColor&&(this.backgroundStyle.text=this.getBackgroundStyle(this.textColor)),void 0!==t.backgroundCommonColor&&(this.backgroundCommonStyle.background=this.getBackgroundStyle(this.backgroundCommonColor)),void 0!==t.textCommonColor&&(this.backgroundCommonStyle.text=this.getBackgroundStyle(this.textCommonColor))}}return t.\u0275fac=function(o){return new(o||t)(i.Kb(n.a),i.Kb(s.a))},t.\u0275cmp=i.Eb({type:t,selectors:[["sh-hook-hotspot-title"]],inputs:{hotspot:"hotspot",backgroundColor:["background-color","backgroundColor"],textColor:["text-color","textColor"],backgroundCommonColor:["background-common-color","backgroundCommonColor"],textCommonColor:["text-common-color","textCommonColor"]},features:[i.xb],decls:7,vars:14,consts:[[1,"hotspot-title-wrapper"],[1,"hotspot-title",3,"ngStyle"],[1,"bottom-triangle"]],template:function(t,o){1&t&&(i.Qb(0,"div",0),i.cc(1,"safe"),i.Qb(2,"div",1),i.cc(3,"safe"),i.Qb(4,"h5"),i.Bc(5),i.Pb(),i.Lb(6,"span",2),i.Pb(),i.Pb()),2&t&&(i.zc("color",i.ec(1,8,o.styleBgc.text,"style")),i.zb(2),i.zc("background",i.ec(3,11,o.styleBgc.background,"style")),i.hc("ngStyle",o.fontStyle(o.hotspot.hotspot_title_font)),i.zb(3),i.Cc(o.i18n.t(o.hotspot.hotspot_title)),i.zb(1),i.zc("border-color",o.hotspot.common_color?o.backgroundCommonColor.color:o.backgroundColor.color))},directives:[r.l],pipes:[a.a],styles:[".hotspot-title-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:-1;top:0;left:0;width:100%;height:100%}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:50%;display:-ms-flex;display:flex;visibility:hidden;max-width:500px;margin-bottom:6px;padding:7px 20px;transform:translateX(-50%);opacity:0;border-radius:20px;background-color:#ccc;transition:opacity .3s ease}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;padding:0;white-space:pre;font-size:16px}.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]   span.bottom-triangle[_ngcontent-%COMP%]{position:absolute;bottom:-6px;left:50%;width:0;height:0;transform:translateX(-50%);border-width:6px 6px 0;border-style:solid;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:transparent!important}  .hotspot.show-title sh-hook-hotspot-title .hotspot-title,   .hotspot:hover sh-hook-hotspot-title .hotspot-title{display:flex!important;visibility:visible!important;opacity:1!important;-webkit-animation:slide-top .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running;animation:slide-top .3s cubic-bezier(.25,.46,.45,.94) 0s 1 normal both running}@media only screen and (max-width:599px){.hotspot-title-wrapper[_ngcontent-%COMP%]   .hotspot-title[_ngcontent-%COMP%]{display:none}}  #overlay.mobile .hotspot .hotspot-title-wrapper .hotspot-title{display:none}@-webkit-keyframes slide-top{0%{transform:translateX(-50%) translateY(20px)}to{transform:translateX(-50%) translateY(-4px)}}"]}),t})()},Gwy6:function(t,o,e){"use strict";e.d(o,"a",(function(){return c}));var i=e("kZht"),n=e("An66"),s=e("3kIJ");const r=["audioElm"];function a(t,o){if(1&t){const t=i.Rb();i.ac(),i.Qb(0,"svg",12),i.Xb("click",(function(){return i.sc(t),i.bc().play()})),i.Lb(1,"path",13),i.Pb()}}function l(t,o){if(1&t){const t=i.Rb();i.ac(),i.Qb(0,"svg",14),i.Xb("click",(function(){return i.sc(t),i.bc().pause()})),i.Lb(1,"rect",15),i.Lb(2,"rect",16),i.Pb()}}let c=(()=>{class t{constructor(){this.currentTime=0,this.duration=0}get notitle(){return this.src.split("/").pop().replace(".mp3","")}load(){this.audioElm&&(this.audio=this.audioElm.nativeElement,this.audio.addEventListener("loadeddata",()=>{this.duration=this.audio.duration,this.currentTime=this.audio.currentTime,this.autoplay&&this.play()}))}play(){this.audio&&this.audio.play()}pause(){this.audio&&this.audio.pause()}formatTime(t){var o,e=0,i=0;return(t=parseInt(t,10)||0)>3600&&(t-=60*(e=parseInt(t/3600+"",10))*60),t>60&&(t-=60*(i=parseInt(t/60+"",10))),o=t,t=e>0?e+":":"",(t+=i>0?(i<10&&e>0?"0":"")+i+":":"0:")+(o<10?"0":"")+o}setCurrentTime(t){this.currentTime=t.target.currentTime}changeCurrentTime(t){this.audio.currentTime=t}ngOnChanges(t){void 0!==t.src&&this.src&&this.load()}ngAfterViewInit(){this.src&&this.load()}ngOnDestroy(){this.pause(),this.audio.remove()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=i.Eb({type:t,selectors:[["sh-audiobox"]],viewQuery:function(t,o){var e;1&t&&i.Ec(r,!0,i.l),2&t&&i.nc(e=i.Yb())&&(o.audioElm=e.first)},inputs:{src:"src",title:"title",light:"light",autoplay:"autoplay"},features:[i.xb],decls:17,vars:10,consts:[[1,"player"],[1,"title-wrap"],[1,"button-wrap"],["class","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 150 150",3,"click",4,"ngIf"],["class","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",3,"click",4,"ngIf"],[1,"title"],[1,"seek-wrap"],["value","0","type","range","min","0","step",".1",1,"seek-bar",3,"ngModel","max","ngModelChange"],[1,"timing"],[3,"timeupdate"],["audioElm",""],["type","audio/mpeg",3,"src"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 150 150",1,"button",3,"click"],["d","M43.3,11.1C36.6,7.1 30.3,9.6 30.3,18.6C30.3,27.6 30.3,121.3 30.3,131.7C30.3,142.1 35.6,144 43.6,139.7C51.6,134.7 133.5,87.5 141.5,83C149.3,78.5 149,72.5 141.5,68.2C134,63.8 52.2,16.4 43.3,11.1Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 48 48",1,"button",3,"click"],["width","18%","height","90%","x","22.5%","y","5%","rx","5%","ry","5%"],["width","18%","height","90%","x","62.5%","y","5%","rx","5%","ry","5%"]],template:function(t,o){1&t&&(i.Qb(0,"div",0),i.Qb(1,"div",1),i.Qb(2,"div",2),i.Ac(3,a,2,0,"svg",3),i.Ac(4,l,3,0,"svg",4),i.Pb(),i.Qb(5,"div",5),i.Bc(6),i.Pb(),i.Pb(),i.Qb(7,"div",6),i.Qb(8,"input",7),i.Xb("ngModelChange",(function(t){return o.currentTime=t}))("ngModelChange",(function(t){return o.changeCurrentTime(t)})),i.Pb(),i.Pb(),i.Qb(9,"div",8),i.Qb(10,"span"),i.Bc(11),i.Pb(),i.Qb(12,"span"),i.Bc(13),i.Pb(),i.Pb(),i.Qb(14,"audio",9,10),i.Xb("timeupdate",(function(t){return o.setCurrentTime(t)})),i.Lb(16,"source",11),i.Pb(),i.Pb()),2&t&&(i.Cb("light",o.light),i.zb(3),i.hc("ngIf",o.audio&&o.audio.paused),i.zb(1),i.hc("ngIf",o.audio&&!o.audio.paused),i.zb(2),i.Cc(o.title||o.notitle),i.zb(2),i.hc("ngModel",o.currentTime)("max",o.duration),i.zb(3),i.Cc(o.formatTime(o.currentTime)),i.zb(2),i.Cc(o.formatTime(o.duration)),i.zb(3),i.hc("src",o.src,i.vc))},directives:[n.k,s.e,s.a,s.c,s.d],styles:['[_nghost-%COMP%]{width:100%}.player[_ngcontent-%COMP%]{color:#434546}.title-wrap[_ngcontent-%COMP%]{display:flex;align-items:center}.title-wrap[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.button-wrap[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;justify-content:center;position:relative;align-items:center;cursor:pointer}.button-wrap[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer;fill:currentColor;z-index:1}.button-wrap[_ngcontent-%COMP%]:before{content:"";opacity:0;width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgba(70,170,255,.1);border-radius:50%;z-index:0}.button-wrap[_ngcontent-%COMP%]:hover{color:#46aaff}.button-wrap[_ngcontent-%COMP%]:hover:before{opacity:1}.seek-wrap[_ngcontent-%COMP%]{margin:4px 0;line-height:0}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;width:100%;height:100%;overflow:visible;outline:0 none;background-color:transparent;line-height:1em;vertical-align:top;font-size:1em;-webkit-appearance:none;cursor:pointer}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]:focus{outline:0 none}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{box-sizing:border-box;width:98%;height:.125em;background-color:#434546;cursor:pointer;-webkit-transition:all .2s ease;transition:all .2s ease}.seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{box-sizing:border-box;width:.5em;height:.5em;margin-top:-.175em;border-radius:.5em;background-color:#434546;-webkit-appearance:none}.seek-wrap[_ngcontent-%COMP%]:hover   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{margin-top:-.3em;margin-left:-.05em;width:.75em;height:.75em;background-color:#46aaff}.timing[_ngcontent-%COMP%]{color:#888;display:flex;justify-content:space-between;font-size:13px}.player.light[_ngcontent-%COMP%]{color:#fefefe}.player.light[_ngcontent-%COMP%]   .seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track, .player.light[_ngcontent-%COMP%]   .seek-wrap[_ngcontent-%COMP%]   .seek-bar[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{background-color:#fefefe}']}),t})()},H8Le:function(t,o,e){"use strict";e.d(o,"a",(function(){return r}));var i=e("An66"),n=e("hCLc"),s=e("kZht");let r=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(o){return new(o||t)},imports:[[i.c,n.c],i.c]}),t})()},OGT8:function(t,o,e){"use strict";e.d(o,"a",(function(){return s}));var i=e("kZht"),n=e("ENSU");let s=(()=>{class t{constructor(t){this.sanitizer=t}transform(t,o){switch(o){case"html":return this.sanitizer.bypassSecurityTrustHtml(t);case"style":return this.sanitizer.bypassSecurityTrustStyle(t);case"script":return this.sanitizer.bypassSecurityTrustScript(t);case"url":return this.sanitizer.bypassSecurityTrustUrl(t);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(t);default:throw new Error("Invalid safe type specified: "+o)}}}return t.\u0275fac=function(o){return new(o||t)(i.Kb(n.b))},t.\u0275pipe=i.Jb({name:"safe",type:t,pure:!0}),t})()},PiNY:function(t,o,e){"use strict";e.d(o,"a",(function(){return d}));var i=e("kZht"),n=e("phvz"),s=e("2OYx"),r=e("s7kB"),a=e("C4W8"),l=e("zNk5"),c=e("cJtj"),h=e("dlUx"),p=e("ENSU");let d=(()=>{class t{constructor(t,o,e,i,n,s,r,a){this.hotspotService=t,this.i18n=o,this.panoService=e,this.viewerService=i,this.menuService=n,this.fontsService=s,this.statsService=r,this.sanitizer=a,this.init=!0,this.default_options={}}get hotspot(){return this.hotspotService.getHotspotById(this.parent_id?this.parent_id:this.id)}get hotspotMain(){return this.hotspotService.getHotspotById(this.id)}get activeId(){return this.hotspotService.activeId}get isActive(){return this.activeId==this.id}get menu_show(){return this.hotspotService.menu_show}get show(){return this.hotspot.content_show?this.hotspotService.activeId==this.data.id||!this.hotspotService.activeId&&this.panoramaActive:this.hotspotService.activeId==this.id||this.hotspotService.closingId==this.id}get animation_style(){return this.hotspotService.animation_style}get panoramaActive(){return this.hotspot.pano.id==this.viewerService.active.id&&this.hotspot.pano.t_id==this.viewerService.active.t_id?!this.close_content_show:(this.close_content_show=!1,!1)}get viewerHeght(){return this.viewerService.viewerHeight}open(){null==this.hotspot.direct_link&&null==this.hotspot.pano_link||this.editorMode?(this.hotspot.center_viewer&&this.viewerService.goToPano(this.hotspotMain.pano,this.hotspotMain.position,!0),this.hotspotService.open(this.hotspotMain.id)):null!=this.hotspot.pano_link?this.hotspot.pano_link.pano&&this.viewerService.goToPano(this.hotspot.pano_link.pano,{theta:this.hotspot.pano_link.theta,phi:this.hotspot.pano_link.phi},!0):null!=this.hotspot.direct_link&&this.hotspot.direct_link&&window.open(this.hotspot.direct_link,this.hotspot.direct_link_target?"_self":"_blank");let t=this.statsService.getWidget(this.hotspot.widget);this.statsService.send({plugin:t.name,type:t.key,details:this.hotspot.pano.id})}close(){this.hotspot.content_show&&(this.close_content_show=!0),this.hotspotService.close()}openHotspotMenu(){this.hotspotService.menu_show=!0}closeHotspotMenu(){this.hotspotService.menu_show=!1}isStyle(t){return this.hotspot.active_style==t}viewPano(t){this.viewerService.active!=t.pano&&this.viewerService.goToPano(t.pano,t)}showHotspotTitle(){this.show_hotspot_title=!0}hideHotspotTitle(){this.show_hotspot_title=!1}fontStyle(t){return this.fontsService.fontStyle(t)}safeUrl(t){return this.sanitizer.bypassSecurityTrustResourceUrl(t)}initData(){this.data?(this.id=this.data.id,this.data.parent_id?this.parent_id=this.data.parent_id:this.checkDefaultDataUpdate()):(this.checkDefaultDataText(),this.initIdforDefault(),this.hotspotService.addHotspot(this.default_options),this.data=this.default_options,this.id=this.default_options.id),null!=this.hotspot.html&&Object.keys(this.hotspot.html).map(t=>{this.hotspot.html[t]=this.parseHtml(this.hotspot.html[t])}),"string"==typeof this.hotspot.image&&(this.hotspot.image=[{img:this.hotspot.image}]),"HotspotHolmlackComponent"==this.hotspot.widget||this.hotspot.styles.filter(t=>"iframe"==t.name).pop()||this.hotspot.styles.push({name:"iframe",opt:["iframe"],ropt:["image","title","title_font","text","text_font","link","link_font","menu","menu_font","html","pano_link","media_size","audio","audio_title","audio_light","audio_autoplay","video_id"]}),this.hotspot.iframe&&(this.hotspot.iframe_safeurl=this.safeUrl(this.hotspot.iframe)),this.editorMode=this.viewerService.editor}initIdforDefault(){this.default_options.id=this.viewerService.createHotspotId(),this.default_options.pano=Object.assign({},this.viewerService.active)}checkDefaultDataText(){null!=this.default_options.hotspot_title&&(this.default_options.hotspot_title=this.i18n.toLangFormat(this.default_options.hotspot_title)),null!=this.default_options.title&&(this.default_options.title=this.i18n.toLangFormat(this.default_options.title)),null!=this.default_options.text&&(this.default_options.text=this.i18n.toLangFormat(this.default_options.text)),null!=this.default_options.html&&(this.default_options.html=this.i18n.toLangFormat(this.default_options.html)),null!=this.default_options.price&&(this.default_options.price=this.i18n.toLangFormat(this.default_options.price)),null!=this.default_options.price_text&&(this.default_options.price_text=this.i18n.toLangFormat(this.default_options.price_text)),null!=this.default_options.link&&(this.default_options.link.text=this.i18n.toLangFormat(this.default_options.link.text)),this.default_options.tabs&&(this.default_options.tabs=this.default_options.tabs.map(t=>(t.tab&&(t.tab=this.i18n.toLangFormat(t.tab)),t.title&&(t.title=this.i18n.toLangFormat(t.title)),t.hotspot_title&&(t.hotspot_title=this.i18n.toLangFormat(t.hotspot_title)),t.sub_title&&(t.sub_title=this.i18n.toLangFormat(t.sub_title)),t.text&&(t.text=this.i18n.toLangFormat(t.text)),t)))}initInOverlay(){this.viewerService.addHotspot(this.data.id,this.hotspot.pano),setTimeout(()=>{this.hotspotService.tempActiveId==this.data.id&&(this.hotspotService.open(this.data.id),this.hotspotService.tempActiveId=null)})}parseHtml(t){var o=document.implementation.createHTMLDocument();return o.body.innerHTML=t.replace(/&lt;/g,"<").replace(/&gt;/g,">"),o.body.innerHTML}checkDefaultDataUpdate(){if(Object.keys(this.default_options).map(t=>{-1==["title","text","video_id","image","content_icon","link","menu","price","html","pano_link","media_size"].indexOf(t)&&null==this.data[t]&&(this.getNewIdentificatorHotspot()[t]=!0,this.data[t]=this.default_options[t])}),this.data.active_style&&this.data.styles&&(this.data.styles=this.default_options.styles,this.data.styles)){let t=this.data.styles.filter(t=>t.name==this.data.active_style).pop();this.addOpt(t.opt),this.removeOpt(t.ropt)}this.checkFontStyle()}getNewIdentificatorHotspot(){let t=this.panoService.newIdentification.hotspots.filter(t=>t.id==this.id).pop();return t||(t={id:this.id},this.panoService.newIdentification.hotspots.push(t)),t}addOpt(t){t.map(t=>{if(null==this.data[t])switch(this.getNewIdentificatorHotspot()[t]=!0,t){case"price":case"title":case"text":case"html":this.data[t]=this.i18n.toLangFormat("");break;case"link":this.data[t]={url:"",text:this.i18n.toLangFormat("")};break;case"image":this.data[t]="";break;case"menu":this.data[t]=[];break;case"pano_link":this.data[t]={};break;case"media_size":this.data[t]=40;break;case"width":this.data[t]=this.hotspot.default_width;break;default:this.data[t]=""}})}removeOpt(t){t.map(t=>{switch(t){case"video_id":delete this.data.video_url;default:delete this.data[t]}})}checkPanosFromMenu(t){return t.map((o,e)=>{"hotspot"!=o.type||o.hotspot!=this.id||this.hotspotService.getHotspotById(this.id)?o.children&&(t[e].children=this.checkPanosFromMenu(o.children),t[e].children.length||delete t[e].children):t.splice(e,1)}),t}checkFontStyle(){Object.keys(this.hotspot).map(t=>{t.endsWith("_font")&&this.hotspot[t]&&this.hotspot[t].family&&this.fontsService.loadFonts([this.hotspot[t].family])})}sanitizeUrl(){this.panoService.sanitizeUrl(this.hotspot)}ngOnInit(){this.init&&(this.initData(),this.sanitizeUrl())}ngAfterViewInit(){this.init&&this.initInOverlay()}ngOnDestroy(){this.init&&this.menuService.menu.panos&&(this.menuService.menu.panos=this.checkPanosFromMenu(this.menuService.menu.panos))}}return t.\u0275fac=function(o){return new(o||t)(i.Kb(n.a),i.Kb(s.a),i.Kb(r.a),i.Kb(a.a),i.Kb(l.a),i.Kb(c.a),i.Kb(h.a),i.Kb(p.b))},t.\u0275cmp=i.Eb({type:t,selectors:[["hotspot-component"]],inputs:{data:"data",init:"init"},decls:0,vars:0,template:function(t,o){},encapsulation:2}),t})()}}]);